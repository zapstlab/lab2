tosca_definitions_version: cloudify_dsl_1_3

imports:
  - http://www.getcloudify.org/spec/cloudify/4.6/types.yaml
  - types/types.yaml

node_templates:


  vRouter-1:
    type: cloudify.nodes.vRouter
    relationships:
      - type: cloudify.relationships.rtr_connected_to_network
        target: PublicNetwork

  vLoadBalancer:
    type: cloudify.nodes.vLB
    relationships:
      - type: cloudify.relationships.rtr_connected_to_network
        target: PublicNetwork
      - type: cloudify.relationships.rtr_connected_to_network
        target: InternalNetwork

  vRouter-2:
    type: cloudify.nodes.vRouter
    relationships:
      - type: cloudify.relationships.rtr_connected_to_network
        target: InternalNetwork
      - type: cloudify.relationships.rtr_connected_to_network
        target: ServiceNetwork

  vAPP-Server-1:
    type: cloudify.nodes.vAS
    relationships:
      - type: cloudify.relationships.rtr_connected_to_network
        target: ServiceNetwork

  vAPP-1-1:
    type: cloudify.nodes.vApplication
    relationships:
      - type: cloudify.relationships.app_contained_in_as
        target: vAPP-Server-1

  vAPP-1-2:
    type: cloudify.nodes.vApplication
    relationships:
      - type: cloudify.relationships.app_contained_in_as
        target: vAPP-Server-1
 
  vAPP-Server-2:
    type: cloudify.nodes.vAS
    relationships:
      - type: cloudify.relationships.rtr_connected_to_network
        target: ServiceNetwork

  vAPP-2-1:
    type: cloudify.nodes.vApplication
    relationships:
      - type: cloudify.relationships.app_contained_in_as
        target: vAPP-Server-2

  vAPP-2-2:
    type: cloudify.nodes.vApplication
    relationships:
      - type: cloudify.relationships.app_contained_in_as
        target: vAPP-Server-2

  PublicNetwork:
    type: cloudify.nodes.Net

  InternalNetwork:
    type: cloudify.nodes.Net

  ServiceNetwork:
    type: cloudify.nodes.Net